# Настройка TikTok Sandbox Environment

## Что такое Sandbox?

Sandbox (песочница) - это тестовая среда TikTok для разработчиков, которая позволяет тестировать приложения перед полным одобрением. В sandbox режиме только специально добавленные тестовые пользователи могут авторизоваться в вашем приложении.

## Зачем нужен Sandbox?

1. **Для новых приложений:** TikTok требует использование sandbox для демонстрации функциональности
2. **Для тестирования:** Безопасное тестирование без воздействия на реальных пользователей
3. **Для ревью:** Необходим для прохождения процесса одобрения приложения
4. **Для разработки:** Позволяет разрабатывать и тестировать локально

## Как настроить Sandbox

### Шаг 1: Создание приложения

1. Войдите в [TikTok for Developers](https://developers.tiktok.com/)
2. Перейдите в "App Management"
3. Создайте новое приложение или выберите существующее

### Шаг 2: Добавление Sandbox Testers

1. В настройках приложения найдите раздел **"Sandbox"** или **"Add a Sandbox"**
2. Нажмите **"Add Sandbox Tester"** или **"Add Tester"**
3. Введите TikTok username тестового пользователя (например: `@username` или просто `username`)
4. Нажмите "Send Invitation"

### Шаг 3: Принятие приглашения

1. Тестовый пользователь должен зайти в свой TikTok аккаунт
2. Перейти в настройки TikTok
3. Найти приглашение в sandbox и принять его
4. После принятия пользователь сможет тестировать приложение

### Шаг 4: Тестирование в Sandbox

1. Убедитесь, что используете аккаунт, добавленный в sandbox
2. Запустите ваше приложение
3. Попробуйте авторизоваться через TikTok
4. Только sandbox testers смогут успешно авторизоваться

## Требования для Sandbox

### Минимальные требования:
- **Минимум 1 тестовый пользователь** (рекомендуется 2-3)
- Тестовые пользователи должны принять приглашение
- Приложение должно быть в статусе "In Sandbox"

### Рекомендации:
- Добавьте несколько тестовых аккаунтов для разных сценариев
- Используйте реальные TikTok аккаунты (не боты)
- Убедитесь, что тестовые пользователи активны

## Проверка Sandbox режима

### В Developer Portal:
1. Перейдите в настройки приложения
2. Статус должен показывать **"In Sandbox"**
3. В разделе "Sandbox" должны быть добавленные тестовые пользователи

### В приложении:
1. Попробуйте авторизоваться с аккаунтом, который НЕ в sandbox
2. Должна появиться ошибка о том, что пользователь не авторизован для использования приложения
3. С sandbox аккаунтом авторизация должна работать успешно

## Использование Sandbox для Demo Video

### Что показать в видео:

1. ✅ Открытие приложения
2. ✅ Нажатие "Войти через TikTok"
3. ✅ Авторизация с sandbox аккаунтом
4. ✅ Успешное получение данных пользователя
5. ✅ Демонстрация функциональности приложения

### Важно:
- Используйте только sandbox аккаунты в видео
- Покажите, что авторизация работает корректно
- Продемонстрируйте все функции приложения
- Убедитесь, что домен в видео совпадает с указанным URL

## Переход в Production

### После одобрения приложения:

1. TikTok одобрит ваше приложение после ревью
2. Приложение автоматически перейдет в production режим
3. Все пользователи TikTok смогут авторизоваться
4. Sandbox можно оставить для тестирования или отключить

### Что меняется:
- ✅ Все пользователи TikTok могут авторизоваться
- ✅ Ограничения sandbox снимаются
- ✅ Приложение становится публично доступным
- ✅ Можно приглашать реальных пользователей

## Troubleshooting

### Проблема: "User not authorized"
**Решение:** Убедитесь, что пользователь добавлен в sandbox и принял приглашение

### Проблема: "App not in sandbox"
**Решение:** Проверьте статус приложения в Developer Portal

### Проблема: Не могу добавить тестового пользователя
**Решение:** 
- Убедитесь, что приложение создано
- Проверьте, что у вас есть права на управление приложением
- Убедитесь, что используете правильный формат username

### Проблема: Тестовый пользователь не получает приглашение
**Решение:**
- Проверьте правильность username
- Убедитесь, что пользователь заходит в правильный TikTok аккаунт
- Попробуйте отправить приглашение повторно

## Полезные ссылки

- [TikTok Developer Portal](https://developers.tiktok.com/)
- [App Review Guidelines](https://developers.tiktok.com/doc/app-review-guidelines/)
- [Login Kit Documentation](https://developers.tiktok.com/doc/login-kit-web/)

## Чеклист для Sandbox

- [ ] Приложение создано в TikTok Developer Portal
- [ ] Добавлены минимум 1-2 sandbox testers
- [ ] Тестовые пользователи приняли приглашения
- [ ] Статус приложения показывает "In Sandbox"
- [ ] Redirect URI настроен для sandbox (можно localhost)
- [ ] Приложение протестировано с sandbox аккаунтом
- [ ] Demo video записано с sandbox аккаунтом
- [ ] Все функции работают корректно в sandbox

После выполнения всех пунктов можно отправлять приложение на ревью!

